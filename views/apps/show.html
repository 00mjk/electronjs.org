<style>
  .app-download {
    background: {{app.goodColorOnWhite}};
    color: white !important;
  }

  .page-section a {
    color: {{app.goodColorOnWhite}};
  }
</style>

<section class="page-section">
  <nav class="row" aria-label="Breadcrumb">
    <ol>
      <li class="breadcrumb-item text-small"><a href="/apps">Apps</a></li>
      <li class="breadcrumb-item breadcrumb-item-selected text-small text-gray" aria-current="page">{{app.name}}</li>
    </ol>
  </nav>

  <header class="app-header">
    <div class="col-md-3 app-logo-container">
      <img class='app-logo' src='/node_modules/electron-apps/apps/{{app.slug}}/{{app.icon128}}' alt='{{app.name}}'>
    </div>

    <div class="col-md-9">
      <h1 class='app-name'>
        <a class="app-link" href="{{app.website}}">{{app.name}}</a>
      </h1>

      <p class="app-description">
        {{app.description}}
      </p>
    </div>
  </header>

  <section>
    <div class="col-md-3 my-3">
      <dl class="border-bottom pb-3 lh-condensed">
        {{#if app.website}}
          <dt>Website</dt>
          <dd>
            <a href="{{app.website}}">{{app.website}}</a>
          </dd>
        {{/if}}
      </dl>

      {{#if app.repository}}
        <dl class="border-bottom py-3 lh-condensed">
          <dt>Repository</dt>
          <dd>
            <a href="{{app.repository}}">{{app.repository}}</a>
          </dd>
        </dl>
      {{/if}}

      <dl class="border-bottom py-3 lh-condensed">
        <dt>Category</dt>
        <dd>
          <a href="/apps?category={{app.categorySlug}}">{{app.category}}</a>
        </dt>
      </dl>

      {{#if app.keywords}}
        <dl class="border-bottom pb-3 lh-condensed">
          <dt>Keywords</dt>
          <dd>
            {{#each app.keywords}}
              <a class="app-keyword" href="/apps?q={{this}}">{{this}}</a>
            {{/each}}
          </dd>
        </dl>
      {{/if}}

      {{#if app.license}}
        <dl class="border-bottom pb-3 lh-condensed">
          <dt>License</dt>
          <dt>{{app.license}}</dd>
        </dl>
      {{/if}}

      <!-- {{#if app.locales}}
        <dl>
          <dt>Languages</dt>
          <dt class="border-bottom pb-3 lh-condensed">
            {{#each app.locales}}
              {{this}}
            {{/each}}
          </dt>
        </dl>
      {{/if}} -->

        {{#if app.latestRelease}}
          {{#if app.latestRelease.assets}}
            <dl class="border-bottom pb-3 lh-condensed">
              <dt>
                Downloads
              </dt>

              <dd>
                {{#each app.latestRelease.assets}}
                  <a class="app-download {{this.platform}}" href="{{this.browser_download_url}}">{{this.name}}</a>
                {{/each}}

                <a href="{{app.latestRelease.html_url}}" id="view-all-downloads" style="opacity:0.7;font-size:80%;display:none;">View all {{app.latestRelease.assets.length}} files</a>
              </dd>
            </dl>
          {{/if}}

          <dl class="border-bottom pb-3 lh-condensed">
            <dt>
              Latest Release
            </dt>
            <dd>
              <a href="{{app.latestRelease.html_url}}">
                {{app.latestRelease.name}}
                <span class="app-tagname">({{app.latestRelease.tag_name}})</span>
              </a>
            </dd>
          </dl>

          <dl>
            <dt>Release Notes</dt>
            <dd class="border-bottom pb-3 lh-condensed">
              {{{app.latestRelease.body_html}}}
            </dd>
          </dl>
        {{/if}}
      </dl>
    </div>

    <div class="col-md-9 my-3">
      {{#if app.readmeCleaned}}
        <div class="app-readme-wrapper">
          <header>
            <button class="app-readme-button btn btn-lg btn-outline-themed" type="button" id="display-readme">
              View the {{app.name}} README <span id="display-readme-icon" class="octicon octicon-chevron-down ml-2"></span>
            </button>
          </header>
          <main id="readme" class="app-readme box-shadow-medium d-none">
            {{{app.readmeCleaned}}}
          </main>
        </div>
      {{/if}}

      <table class="app-screenshots my-3 box-shadow-medium">
        <tr>
          {{#each app.screenshots}}
            <td>
              <figure>
                <a href="{{../app.website}}">
                  <img src="{{imageUrl}}" />
                </a>
                {{#if caption}}
                  <figcaption class="f6 text-center">
                    {{caption}}
                  </figcaption>
                {{/if}}
              </figure>
            </td>
          {{/each}}
        </tr>
      </table>
    </div>
  </section>
</section>

<script>
  document.getElementById('display-readme').addEventListener('click', function(event) {
    this.classList.add('d-none');
    document.getElementById('readme').classList.remove('d-none');
  });
</script>
