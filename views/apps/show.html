<style>
  .app-download {
    background: {{app.goodColorOnWhite}};
    color: white !important;
  }

  .page-section a {
    color: {{app.goodColorOnWhite}};
  }
</style>

<section class="page-section">
  <nav class="row" aria-label="Breadcrumb">
    <ol>
      <li class="breadcrumb-item text-small"><a href="/apps">Apps</a></li>
      <li class="breadcrumb-item breadcrumb-item-selected text-small text-gray" aria-current="page">{{app.name}}</li>
    </ol>
  </nav>

  <header class="app-header">
    <div class="left-column app-logo-container">
      <img class='app-logo' src='/node_modules/electron-apps/apps/{{app.slug}}/{{app.icon128}}' alt='{{app.name}}'>
    </div>

    <div class="right-column">
      <a class="app-link" href="{{app.website}}">
        <h1 class='app-name'>{{app.name}}</h1>
      </a>
    </div>
  </header>

  <dl>
    {{#if app.website}}
      <dt>Website</dt>
      <dd>
        <a href="{{app.website}}">{{app.website}}</a>
      </dd>
    {{/if}}

    {{#if app.repository}}
      <dt>Repository</dt>
      <dd>
        <a href="{{app.repository}}">{{app.repository}}</a>
      </dd>
    {{/if}}

    <dt>Category</dt>
    <dt><a href="/apps?category={{app.categorySlug}}">{{app.category}}</a></dt>

    {{#if app.keywords}}
      <dt>Keywords</dt>
      <dd>
        {{#each app.keywords}}
          <a class="app-keyword" href="/apps?q={{this}}">{{this}}</a>
        {{/each}}
      </dd>
    {{/if}}

    {{#if app.license}}
      <dt>License</dt>
      <dt>{{app.license}}</dd>
    {{/if}}

    <!-- {{#if app.locales}}
      <dt>Languages</dt>
      <dt>
        {{#each app.locales}}
          {{this}}
        {{/each}}
      </dt>
    {{/if}} -->

    {{#if app.latestRelease}}
      {{#if app.latestRelease.assets}}
        <dt>
          Downloads
        </dt>
        <dd>
          {{#each app.latestRelease.assets}}
            <a class="app-download {{this.platform}}" href="{{this.browser_download_url}}">{{this.name}}</a>
          {{/each}}

          <a href="{{app.latestRelease.html_url}}" id="view-all-downloads" style="opacity:0.7;font-size:80%;display:none;">View all {{app.latestRelease.assets.length}} files</a>
        </dd>
      {{/if}}

      <dt>
        Latest Release
      </dt>
      <dd>
        <a href="{{app.latestRelease.html_url}}">
          {{app.latestRelease.name}}
          <span class="app-tagname">({{app.latestRelease.tag_name}})</span>
        </a>
      </dd>

      <dt>Release Notes</dt>
      <dd>
        {{{app.latestRelease.body_html}}}
      </dd>
    {{/if}}
  </dl>

  <table class="app-details left-column">

  </table>

  <div class="left">
    <p class="app-description">
      {{app.description}}
    </p>

    {{#each app.screenshots}}
      <figure class="app-sreenshot">
        <a href="{{../app.website}}">
          <img src="{{imageUrl}}"></img>
        </a>
        {{#if caption}}
          <figcaption class="text-center">
            {{caption}}
          </figcaption>
        {{/if}}
      </figure>
    {{/each}}

    {{#if app.readmeCleaned}}
      <div class="app-readme-wrapper">
        <header class="app-readme-header">
          <button class="app-readme-button btn btn-lg btn-outline-themed" type="button" id="display-readme">
            View the {{app.name}} README <span id="display-readme-icon" class="octicon octicon-chevron-down ml-2"></span>
          </button>
        </header>
        <main id="readme" class="app-readme d-none">
          {{{app.readmeCleaned}}}
        </main>
      </div>
    {{/if}}
  </div>
</section>

<script>
  document.getElementById('display-readme').addEventListener('click', function(event) {
    this.classList.add('d-none');
    document.getElementById('readme').classList.remove('d-none');
  });
</script>
